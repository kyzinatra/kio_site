import{u as d,j as s,L as a,R as m}from"./index-4fc40948.js";import{u as h,Q as c,m as p,a as f,B as j,L as x}from"./layout.component-a6c77085.js";import{R,I as _,U as S}from"./user-connections-b75135ff.js";const I=`${f}/SIGN_IN_QUERY`;async function E(e){return await p(I,{body:e})}const N=()=>{const e=d();return h({mutationKey:[c.SIGN_IN],mutationFn:E,retry:1,onSuccess:()=>{e.invalidateQueries([c.ME])}})},b="_form_hzhcb_1 _form-width_esyqq_11",g="_form__controls_hzhcb_7",q="_form__nav_hzhcb_23",o={form:b,form__controls:g,form__nav:q},y={email:"",password:""},U=()=>{const{mutate:e,isError:t,isLoading:r}=N(),u=n=>{e({email:n.email||"",password:n.password||""})};return s.jsx(R,{onSubmit:u,initialValues:y,render:({handleSubmit:n,dirtySinceLastSubmit:i})=>s.jsxs("form",{className:o.form,onSubmit:n,children:[s.jsxs("div",{className:o.form__controls,children:[s.jsx(_,{placeholder:"Почта",type:"email",name:"email",isError:t&&!i,disabled:r,autoComplete:"email",required:!0}),s.jsx(_,{placeholder:"Пароль",name:"password",type:"password",isError:t&&!i,disabled:r,autoComplete:"current-password",required:!0}),s.jsx(j,{type:"submit",theme:"accent",disabled:r,children:"Отправить"})]}),s.jsxs("div",{className:o.form__nav,children:[s.jsx(a,{to:m.FORGOT_PASSWORD_ROUTE,theme:"underline",children:"Забыл Пароль"}),s.jsx(a,{to:m.SIGN_UP_ROUTE,theme:"underline",children:"У меня еще нет аккаунта"})]})]})})},l={"sign-in":"_sign-in_1bazj_1 _center-page_esyqq_19 _full-height-form_esyqq_1"},v=()=>s.jsx(x,{protectedFrom:"authorized",withHelp:!0,children:s.jsxs("main",{className:l["sign-in"],children:[s.jsx(S,{children:"Войти через социальные сети"}),s.jsx("h2",{className:l["sign-in__sub-title"],children:"Или через личный аккаунт"}),s.jsx(U,{})]})});export{v as SignIn};
